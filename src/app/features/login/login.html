<div class="auth login">
  <h2>login</h2>
  <form class="login__form" [formGroup]="loginForm" (ngSubmit)="onSubmit()">
    <mat-form-field appearance="outline">
      <mat-label>Email</mat-label>
      <input matInput formControlName="email" aria-describedby="email-error" />
      <mat-error id="email-error" aria-live="assertive">
        @if (loginForm.controls.email.hasError('required')) {
          Email is required
        }

        @if (loginForm.controls.email.hasError('pattern')) {
          Valid e-mail: example&#64;domain.com
        }
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Password</mat-label>
      <input
        matInput
        formControlName="password"
        [type]="isPasswordHidden ? 'password' : 'text'"
        aria-describedby="password-error"
      />
      <button
        mat-icon-button
        matSuffix
        (click)="togglePasswordVisibility()"
        type="button"
        [attr.aria-label]="isPasswordHidden ? 'Show password' : 'Hide password'"
      >
        <mat-icon>{{ isPasswordHidden ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>

      <mat-error id="password-error" aria-live="assertive">
        @if (loginForm.controls.password.hasError('required')) {
          Password is required
        }

        @if (loginForm.controls.password.hasError('pattern')) {
          Must be 8+ characters, include upper/lowercase and number
        }
      </mat-error>
    </mat-form-field>

    <mat-error [class.visible]="errorMessage" class="error-message">
      {{ errorMessage }}
    </mat-error>

    <button class="btn primary" type="submit" [aria-disabled]="loginForm.invalid ? true : null">
      Log In
    </button>

    <a
      class="login__link"
      routerLink="/registration"
      routerLinkActive="active"
      aria-label="Go to Registration page"
      >Don't have an account? Register</a
    >

    <div class="divider">
      <span>or</span>
    </div>

    <button class="btn secondary" (click)="signInWithGoogle()">Continue with Google</button>
  </form>
</div>
